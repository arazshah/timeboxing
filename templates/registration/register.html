{% extends 'base.html' %} {% load static %} {% block title %}Register - Personal
Timebox{% endblock %} {% block extra_css %}{% endblock %} {% block content %}
<div class="container">
  <div class="register-container">
    <div class="register-header">
      <i class="fas fa-user-plus fa-3x text-success mb-3"></i>
      <h2>Create Account</h2>
      <p class="text-muted">
        Join Personal Timebox and boost your productivity!
      </p>
    </div>

    {% if form.errors %}
    <div class="alert alert-danger" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>
      <strong>Please fix the following errors:</strong>
      {% for field, errors in form.errors.items %} {% for error in errors %}
      <div>â€¢ {{ error }}</div>
      {% endfor %} {% endfor %}
    </div>
    {% endif %}

    <form method="post" id="registerForm">
      {% csrf_token %}

      <div class="row">
        <div class="col-md-6">
          <div class="form-floating">
            <input
              type="text"
              class="form-control"
              id="id_first_name"
              name="first_name"
              placeholder="First Name"
              value="{{ form.first_name.value|default:'' }}"
            />
            <label for="id_first_name">
              <i class="fas fa-user me-2"></i>First Name
            </label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-floating">
            <input
              type="text"
              class="form-control"
              id="id_last_name"
              name="last_name"
              placeholder="Last Name"
              value="{{ form.last_name.value|default:'' }}"
            />
            <label for="id_last_name">
              <i class="fas fa-user me-2"></i>Last Name
            </label>
          </div>
        </div>
      </div>

      <div class="form-floating">
        <input
          type="text"
          class="form-control"
          id="id_username"
          name="username"
          placeholder="Username"
          value="{{ form.username.value|default:'' }}"
          required
        />
        <label for="id_username">
          <i class="fas fa-at me-2"></i>Username
        </label>
        <div class="form-text">
          Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.
        </div>
      </div>

      <div class="form-floating">
        <input
          type="email"
          class="form-control"
          id="id_email"
          name="email"
          placeholder="Email"
          value="{{ form.email.value|default:'' }}"
        />
        <label for="id_email">
          <i class="fas fa-envelope me-2"></i>Email (optional)
        </label>
        <div class="form-text">
          Optional: Used for password reset and notifications.
        </div>
      </div>

      <div class="form-floating">
        <input
          type="password"
          class="form-control"
          id="id_password1"
          name="password1"
          placeholder="Password"
          required
        />
        <label for="id_password1">
          <i class="fas fa-lock me-2"></i>Password
        </label>
      </div>

      <div class="password-requirements">
        <strong>Password requirements:</strong>
        <ul>
          <li>At least 8 characters long</li>
          <li>Cannot be too similar to your personal information</li>
          <li>Cannot be a commonly used password</li>
          <li>Cannot be entirely numeric</li>
        </ul>
      </div>

      <div class="form-floating">
        <input
          type="password"
          class="form-control"
          id="id_password2"
          name="password2"
          placeholder="Confirm Password"
          required
        />
        <label for="id_password2">
          <i class="fas fa-lock me-2"></i>Confirm Password
        </label>
      </div>

      <div class="form-check mb-3">
        <input
          type="checkbox"
          class="form-check-input"
          id="agree_terms"
          required
        />
        <label class="form-check-label" for="agree_terms">
          I agree to the
          <a href="#" class="text-decoration-none">Terms of Service</a> and
          <a href="#" class="text-decoration-none">Privacy Policy</a>
        </label>
      </div>

      <button type="submit" class="btn btn-success btn-register w-100">
        <i class="fas fa-user-plus me-2"></i>Create Account
      </button>
    </form>

    <div class="login-link">
      <p class="mb-0">
        Already have an account?
        <a href="{% url 'login' %}" class="text-decoration-none fw-bold">
          Sign in here <i class="fas fa-arrow-right ms-1"></i>
        </a>
      </p>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  // Password confirmation validation
  document.addEventListener("DOMContentLoaded", function () {
    const password1 = document.getElementById("id_password1");
    const password2 = document.getElementById("id_password2");

    function validatePasswords() {
      if (password1.value && password2.value) {
        if (password1.value === password2.value) {
          password2.setCustomValidity("");
          password2.classList.remove("is-invalid");
          password2.classList.add("is-valid");
        } else {
          password2.setCustomValidity("Passwords do not match");
          password2.classList.remove("is-valid");
          password2.classList.add("is-invalid");
        }
      }
    }

    password1.addEventListener("input", validatePasswords);
    password2.addEventListener("input", validatePasswords);

    // Username availability check (placeholder)
    const username = document.getElementById("id_username");
    username.addEventListener("blur", function () {
      // Could add AJAX check for username availability
      console.log("Check username availability:", this.value);
    });
  });
</script>
{% endblock %}
